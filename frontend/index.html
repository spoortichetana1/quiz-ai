<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Quiz Generator</title>
  <link rel="stylesheet" href="style.css" />
  <script src="script.js" defer></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">ğŸ§ </div>
      <div>
        <div class="title">AI Quiz Generator</div>
        <div class="subtitle">Generate a quiz, answer it, get explanations.</div>
      </div>
    </div>

    <!-- Updated: clearer backend status + small helper text -->
    <div class="statusWrap">
      <div class="pill" id="statusPill">Backend: checkingâ€¦</div>
      <div class="statusHint" id="statusHint">Start backend to use AI generation.</div>
    </div>
  </header>

  <main class="container">

    <!-- SETUP VIEW -->
    <section class="card" id="viewSetup">
      <h2>Create your quiz</h2>

      <!-- Updated: quick presets (optional, but helpful for kids) -->
      <div class="presetRow">
        <button class="chip" data-preset="Fractions add and subtract">Fractions</button>
        <button class="chip" data-preset="Solar System planets and facts">Solar System</button>
        <button class="chip" data-preset="Dinosaurs types and time periods">Dinosaurs</button>
        <button class="chip" data-preset="Python basics variables loops">Python</button>
      </div>

      <div class="grid">
        <label class="field">
          <span>Topic</span>
          <input id="topicInput" type="text" placeholder="e.g., Fractions, Solar System, Dinosaurs" maxlength="80" />
          <small>Tip: keep it specific. â€œFractions add/subtractâ€ is better than â€œMathâ€.</small>
        </label>

        <label class="field">
          <span>Difficulty</span>
          <select id="difficultySelect">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="hard">Hard</option>
          </select>
          <small>Easy = basic facts. Hard = deeper thinking.</small>
        </label>

        <label class="field">
          <span>Number of questions</span>
          <select id="countSelect">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="15">15</option>
          </select>
          <small>Start with 5 if you want it faster.</small>
        </label>

        <!-- Updated: include explanations toggle (frontend only; backend always returns explanations) -->
        <label class="field">
          <span>Show explanations</span>
          <select id="explainSelect">
            <option value="yes" selected>Yes (recommended)</option>
            <option value="no">No</option>
          </select>
          <small>Turn off if you want to test yourself first.</small>
        </label>
      </div>

      <div class="row">
        <button class="btn primary" id="btnGenerate">Generate Quiz (AI)</button>
        <button class="btn" id="btnLoadMock" title="Loads a demo quiz without calling backend">Load Demo Quiz</button>
      </div>

      <!-- Updated: clearer â€œhow it worksâ€ and a quick â€œis backend runningâ€ checklist -->
      <div class="hint">
        <strong>How it works:</strong> Live Server runs this page. Your backend (FastAPI) generates quiz JSON and sends it here.
        <div class="checklist">
          <div>âœ… Live Server open</div>
          <div>âœ… backend running at <code>http://127.0.0.1:8000</code></div>
          <div>âœ… <code>/health</code> shows <code>"mock": false</code> for real AI</div>
        </div>
      </div>
    </section>

    <!-- LOADING VIEW -->
    <section class="card hidden" id="viewLoading">
      <h2>Generating your quizâ€¦</h2>
      <p class="muted" id="loadingHint">This may take a few seconds.</p>
      <div class="loader"></div>
      <button class="btn" id="btnCancelLoading">Cancel</button>
    </section>

    <!-- QUIZ VIEW -->
    <section class="card hidden" id="viewQuiz">
      <div class="quizHeader">
        <div>
          <h2 id="quizTitle">Quiz</h2>
          <p class="muted" id="quizMeta"></p>
        </div>
        <div class="progress" id="progressText">0 / 0</div>
      </div>

      <div id="questionArea" class="questionArea"></div>

      <div class="row spaceBetween">
        <button class="btn" id="btnPrev">â† Previous</button>
        <button class="btn primary" id="btnNext">Next â†’</button>
      </div>

      <div class="row spaceBetween">
        <button class="btn danger" id="btnRestart">Restart</button>
        <button class="btn primary" id="btnSubmit">Submit Quiz</button>
      </div>
    </section>

    <!-- RESULTS VIEW -->
    <section class="card hidden" id="viewResults">
      <h2>Results</h2>
      <div class="scoreBox">
        <div class="score" id="scoreText">0 / 0</div>
        <div class="muted" id="scoreMessage">â€”</div>
      </div>

      <div class="row">
        <!-- Updated: quick action buttons -->
        <button class="btn" id="btnReview">Review Answers</button>
        <button class="btn" id="btnTryAgain">Try Same Quiz Again</button>
        <button class="btn primary" id="btnNewQuiz">Create New Quiz</button>
      </div>

      <div id="reviewArea" class="reviewArea hidden"></div>
    </section>

    <!-- ERROR BAR -->
    <div class="errorBar hidden" id="errorBar"></div>

  </main>

  <footer class="footer">
    <span>Tip: If backend is off, you can still use â€œLoad Demo Quizâ€.</span>
  </footer>

  <!-- NOTE:
    This updated HTML adds a few new IDs:
      - statusHint, explainSelect, loadingHint
      - btnReview, btnTryAgain
      - reviewArea now starts hidden in results view
    Your script.js should be updated to use these (I can generate updated script.js next).
  -->
</body>
</html>
